<!DOCTYPE html>
<html>

<head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Build list - This page shows raw metrics generated by saucelabs-browsertime for the build 51</title>
    <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css">

    <style>
    .is-hidden { display: none; }
    body { padding: 80px; }
    </style>
</head>
<body>
<h1 id="saucelabs-browsertime-build-status-https-travis-ci-org-mklabs-saucelabs-browsertime-svg-branch-master-https-travis-ci-org-mklabs-saucelabs-browsertime-">Saucelabs Browsertime <a href="https://travis-ci.org/mklabs/saucelabs-browsertime"><img src="https://travis-ci.org/mklabs/saucelabs-browsertime.svg?branch=master" alt="Build Status"></a></h1>
<p>Using Webdriver to collect Navigation Timing, on Saucelabs.</p>
<pre><code>Usage: sauce-browsertime [options] [urls, ...]

    $ sauce-browsertime http://example.com -b firefox -n 3 --assert-pageload-max=5000 --assert-frontend-p90=2500

See https://saucelabs.com/platforms for the list of available OS / Browser / Version

Options:

  -b, --browser          - Saucelabs browser (default: chrome)
  -p, --platform         - Saucelabs platform (default: unspecified)
  -t, --type             - Saucelabs device type (default: unspecified)
  -o, --orientation      - Saucelabs device orientation (default: unspecified)
  -v, --version          - Saucelabs browser version (default: unspecified)
  -n, --runs             - Number of runs per URL (default: 1)
  -R, --reporter         - Mocha reporter (default: json)
  -H, --hostname         - Webdriver-grid hostname (default: ondemand.saucelabs.com)
  --port                 - Specify webdriver-grid port (default: 80)
  -h, --help

Asserts:

  --assert-name-stat=[value]   - Specify a test assertion on [name] metric
  --assert-name=value          - Specify a test assertion on [name] average value

Available stats: min, max, avg, media, mad, p60, p70, p80, p90
</code></pre><p>Every webdriver enabled browser on Saucelabs, implementing <a href="http://caniuse.com/#feat=nav-timing">Navigation Timing API</a> should be supported.</p>
<h2 id="install">Install</h2>
<pre><code>$ npm install saucelabs-browsertime -g

# local
$ npm install saucelabs-browsertime
node_modules/.bin/sauce-browsertime -h
</code></pre><h2 id="asserts">Asserts</h2>
<p><code>--assert-*</code> params sets up test assertion on a specific interval and stat.</p>
<p>Stats are based on <a href="https://github.com/tmcw/simple-statistics">https://github.com/tmcw/simple-statistics</a>. Use the <code>-n, --runs</code> option to set the number of pageload per URL.</p>
<pre><code>$ node bin/sauce-browsertime -h --assert-help

Asserts:

  --assert-name-stat=[value]   - Specify a test assertion on [name] metric
  --assert-name=value          - Specify a test assertion on [name] average valu
e


Metrics:

  --assert-domainLookup
  --assert-redirection
  --assert-serverConnection
  --assert-serverResponse
  --assert-pageDownload
  --assert-domInteractive
  --assert-domContentLoaded
  --assert-pageLoad
  --assert-frontEnd
  --assert-backEnd

Available stats: min, max, avg, media, mad, p60, p70, p80, p90
</code></pre><p>Example on <a href="http://sauceio.com">sauceio.com</a>, running 10 times, with
assertion on pageLoad, backandTime and frontendTime.</p>
<pre><code>$ sauce-browsertime sauceio.com -n 10 \
  --assert-pageLoadTime-max=5000 \
  --assert-pageLoadTime-avg=2000 \
  --assert-backendTime-max=800 \
  --assert-backendTime-p90=700 \
  --assert-frontend=100 \
  --reporter spec

Collecting Navigation Timings with chrome
  sauceio.com
    √ sauceio.com #1
    √ sauceio.com #2
    √ sauceio.com #3
    √ sauceio.com #4
    √ sauceio.com #5
    √ sauceio.com #6
    √ sauceio.com #7
    √ sauceio.com #8
    √ sauceio.com #9
    √ sauceio.com #10

Asserts - sauceio.com
  √ Assert pageload max &lt;= 5000 (Value: 285)
  √ Assert pageload avg &lt;= 2000 (Value: 96.8)
  √ Assert backend max &lt;= 800 (Value: 29)
  √ Assert backend p90 &lt;= 700 (Value: 16.5)
  √ Assert frontend avg &lt;= 100 (Value: 83.2)

  15 passing (23s)
</code></pre><h2 id="reporters">Reporters</h2>
<p>Mocha reporters should be usable for the most part</p>
<pre><code>$ mocha --reporters

    dot - dot matrix
    doc - html documentation
    spec - hierarchical spec list
    json - single json object
    progress - progress bar
    list - spec-style listing
    tap - test-anything-protocol
    landing - unicode landing strip
    xunit - xunit reporter
    html-cov - HTML test coverage
    json-cov - JSON test coverage
    min - minimal reporter (great with --watch)
    json-stream - newline delimited json events
    markdown - markdown documentation (github flavour)
    nyan - nyan cat!
</code></pre><p><em>few examples</em></p>
<p>JSON (default)</p>
<pre><code>$ sauce-browsertime http://example.com -n 3 --reporter json
{
  &quot;stats&quot;: {
    &quot;suites&quot;: 2,
    &quot;tests&quot;: 3,
    &quot;passes&quot;: 3,
    &quot;pending&quot;: 0,
    &quot;failures&quot;: 0,
    &quot;start&quot;: &quot;2014-04-30T21:28:43.124Z&quot;,
    &quot;timings&quot;: {
      &quot;http://example.com&quot;: {
        &quot;domainLookupTime&quot;: {
          &quot;min&quot;: 0,
          &quot;max&quot;: 0,
          &quot;avg&quot;: 0,
          &quot;median&quot;: 0,
          &quot;mad&quot;: 0,
          &quot;p60&quot;: 0,
          &quot;p70&quot;: 0,
          &quot;p80&quot;: 0,
          &quot;p90&quot;: 0
        },
        &quot;redirectionTime&quot;: {
          &quot;min&quot;: 0,
          &quot;max&quot;: 0,
          &quot;avg&quot;: 0,
          &quot;median&quot;: 0,
          &quot;mad&quot;: 0,
          &quot;p60&quot;: 0,
          &quot;p70&quot;: 0,
          &quot;p80&quot;: 0,
          &quot;p90&quot;: 0
        },
        &quot;serverConnectionTime&quot;: {
          &quot;min&quot;: 0,
          &quot;max&quot;: 0,
          &quot;avg&quot;: 0,
          &quot;median&quot;: 0,
          &quot;mad&quot;: 0,
          &quot;p60&quot;: 0,
          &quot;p70&quot;: 0,
          &quot;p80&quot;: 0,
          &quot;p90&quot;: 0
        },
        &quot;serverResponseTime&quot;: {
          &quot;min&quot;: 2,
          &quot;max&quot;: 6,
          &quot;avg&quot;: 4,
          &quot;median&quot;: 4,
          &quot;mad&quot;: 2,
          &quot;p60&quot;: 4,
          &quot;p70&quot;: 6,
          &quot;p80&quot;: 6,
          &quot;p90&quot;: 6
        },
        &quot;pageDownloadTime&quot;: {
          &quot;min&quot;: 0,
          &quot;max&quot;: 1,
          &quot;avg&quot;: 0.77777777777777777,
          &quot;median&quot;: 1,
          &quot;mad&quot;: 0,
          &quot;p60&quot;: 1,
          &quot;p70&quot;: 1,
          &quot;p80&quot;: 1,
          &quot;p90&quot;: 1
        },
        &quot;domInteractiveTime&quot;: {
          &quot;min&quot;: 17,
          &quot;max&quot;: 46,
          &quot;avg&quot;: 29.333333333333332,
          &quot;median&quot;: 25,
          &quot;mad&quot;: 8,
          &quot;p60&quot;: 25,
          &quot;p70&quot;: 46,
          &quot;p80&quot;: 46,
          &quot;p90&quot;: 46
        },
        &quot;domContentLoadedTime&quot;: {
          &quot;min&quot;: 17,
          &quot;max&quot;: 46,
          &quot;avg&quot;: 29.333333333333332,
          &quot;median&quot;: 25,
          &quot;mad&quot;: 8,
          &quot;p60&quot;: 25,
          &quot;p70&quot;: 46,
          &quot;p80&quot;: 46,
          &quot;p90&quot;: 46
        },
        &quot;pageLoadTime&quot;: {
          &quot;min&quot;: 19,
          &quot;max&quot;: 46,
          &quot;avg&quot;: 30,
          &quot;median&quot;: 25,
          &quot;mad&quot;: 6,
          &quot;p60&quot;: 25,
          &quot;p70&quot;: 46,
          &quot;p80&quot;: 46,
          &quot;p90&quot;: 46
        },
        &quot;frontEndTime&quot;: {
          &quot;min&quot;: 11,
          &quot;max&quot;: 20,
          &quot;avg&quot;: 14.333333333333334,
          &quot;median&quot;: 12,
          &quot;mad&quot;: 1,
          &quot;p60&quot;: 12,
          &quot;p70&quot;: 20,
          &quot;p80&quot;: 20,
          &quot;p90&quot;: 20
        },
        &quot;backEndTime&quot;: {
          &quot;min&quot;: 4,
          &quot;max&quot;: 33,
          &quot;avg&quot;: 15,
          &quot;median&quot;: 8,
          &quot;mad&quot;: 4,
          &quot;p60&quot;: 8,
          &quot;p70&quot;: 33,
          &quot;p80&quot;: 33,
          &quot;p90&quot;: 33
        }
      }
    },
    &quot;caps&quot;: {
      &quot;rotatable&quot;: false,
      &quot;browserConnectionEnabled&quot;: false,
      &quot;acceptSslCerts&quot;: false,
      &quot;cssSelectorsEnabled&quot;: true,
      &quot;javascriptEnabled&quot;: true,
      &quot;databaseEnabled&quot;: false,
      &quot;chrome.chromedriverVersion&quot;: &quot;26.0.1383.0&quot;,
      &quot;locationContextEnabled&quot;: false,
      &quot;takesScreenshot&quot;: true,
      &quot;platform&quot;: &quot;linux&quot;,
      &quot;browserName&quot;: &quot;chrome&quot;,
      &quot;version&quot;: &quot;28.0.1500.95&quot;,
      &quot;hasMetadata&quot;: true,
      &quot;nativeEvents&quot;: true,
      &quot;applicationCacheEnabled&quot;: false,
      &quot;webStorageEnabled&quot;: true,
      &quot;handlesAlerts&quot;: true
    },
    &quot;end&quot;: &quot;2014-04-30T21:28:52.644Z&quot;,
    &quot;duration&quot;: 9520
  },
  &quot;tests&quot;: [ ... includes raw timings here as duration props ... ],
  &quot;passes&quot;: [ ... same as above ... ]
</code></pre><p>Spec</p>
<pre><code>$ sauce-browsertime http://example.com -n 3 --reporter spec

Collecting Navigation Timings with chrome
  http://example.com
    √ http://example.com #1
    √ http://example.com #2
    √ http://example.com #3


  3 passing (11s)
</code></pre><p>Nyan!</p>
<pre><code>$ sauce-browsertime http://example.com http://example.com/page-one http://example.com/page-two -n 4 --reporter nyan

 12  -_-_-_-_-_-_-_,------,
 0   -_-_-_-_-_-_-_|   /\_/\
 0   -_-_-_-_-_-_-^|__( ^ .^)
     -_-_-_-_-_-_-  &quot;&quot;  &quot;&quot;

  12 passing (23s)
</code></pre><h2 id="html-templates">HTML templates</h2>
<p>Not a a mocha reporter per say. Transforms the raw JSON data of a
previous run into an HTML page, with visual representation of the Timing
objects thanks to <a href="http://kaaes.github.io/timing/">http://kaaes.github.io/timing/</a></p>
<pre><code>Usage: sauce-browsertime-html [options] file.json

    $ sauce-browsertime results.json &gt; index.html

Graphs generated thanks to http://kaaes.github.io/timing/
Browser logos thanks to https://github.com/alrra/browser-logos

Options:

  -b, --browser          - Browser under test (used to match browser logo)
</code></pre><h2 id="jenkins-template">Jenkins template</h2>
<p><code>config.xml</code> file is a Jenkins Job template that can be used to quickly
setup a Job to run the perf test, at a fixed interval or on SCM change:</p>
<ul>
<li><p>Includes Job parameters for:</p>
<ul>
<li><code>PERF_URLS</code>: List of URLs to test. Whitespace separated.</li>
<li><code>SAUCE_USERNAME</code>: Saucelabs username</li>
<li><code>SAUCE_ACCESS_KEY</code>: Saucelabs API key</li>
<li><code>SAUCE_BROWSERS</code>: Comma separated list of browsers.</li>
</ul>
</li>
<li><p>Shell scripts</p>
<ul>
<li>Install npm packages on first run (npm install saucelabs-browsertime)</li>
<li>A run for each browser, stats &amp; raw metrics available at <code>./results/BUILD_NUMBER/BROWSER/metrics.json</code>, HTML report at <code>./results/BUILD_NUMBER/BROWSER/metrics.json</code>.</li>
</ul>
</li>
<li><p>Plugin configuration for htmlpublisher (optional to have it installed,
jenkins will just ignore the conf)</p>
</li>
</ul>
<p>See config.xml file for further detail.</p>
<pre><code># Job creation
$ curl -X POST -H &#39;Content-Type: application/xml&#39; $JEKINS_URL/pluginManager/installNecessaryPlugins --data-binary @config.xml

# Check plugins
$ curl -X POST -H &#39;Content-Type: application/xml&#39; $JEKINS_URL/pluginManager/prevalidateConfig --data-binary @config.xml

# Install plugins
$ curl -X POST -H &#39;Content-Type: application/xml&#39; $JEKINS_URL/pluginManager/installNecessaryPlugins --data-binary @config.xml
</code></pre><h3 id="todos">TODOs</h3>
<ul>
<li>[] Statsd / Graphite reporter</li>
<li>[x] Assert system (like phantomas)</li>
<li>[x] HTML reporter with <a href="http://kaaes.github.io/timing/">http://kaaes.github.io/timing/</a> widget</li>
<li>[x] Option for the number of runs, and stats (avg, median, percentiles)</li>
</ul>

</body>
</html>
